<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="title" content="Spotknack Talent Community">
    <meta name="description"
        content="A community of like-minded, passionate, and motivated students formed by mentoring with the help of a working professional.">
    <meta name="keywords" content="community, mentoring,spotknack ,passionate">
    <meta name="robots" content="index, follow">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display&display=swap" rel="stylesheet">
    <!-- <meta name="language" content="English"> -->
    <meta name="revisit-after" content="7 days">
    <meta name="author" content="spotknack">
    <title> Impact chain </title>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600&family=Poppins&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="css/impact_chain.css">
    <link rel="stylesheet" href="css/story.css">
    <link rel="icon" type="image/ico" href="img/talent green.png">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.2/css/all.css"
        integrity="sha384-vSIIfh2YWi9wW0r9iZe7RJPrKwp6bG+s9QZMoITbCckVJqGCCRhc+ccxNcdpHuYu" crossorigin="anonymous">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-144587839-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'UA-144587839-1');
    </script>

    <script>
        function mentor() {
            console.log("funciton called");
            // var img_id = document.getElementById("mentor")
            fetch('https://testawsapi2.spotknack.com/api/impactmentorslist')
                .then(function (response) {
                    // console.log(response)
                    return response.json()
                })
                .then((data) => {
                    var classs = document.getElementById("impactBox");
                    // var class_length = classs.length;
                    // console.log(classs);
                    len = data.length;
                    console.log("length of mentor" + len)
                    for (var i = 0; i < len; i++) {
                        // outer box creation
                        var boxblock = document.createElement('div');
                        boxblock.className = "impact-box-block";
                        // boxblock.onclick = growtree();
                        boxblock.id = data[i].mentor_id;
                        boxblock.setAttribute("onclick", "growtree();");
                        console.log(boxblock)
                        classs.appendChild(boxblock);

                        // dp box creation
                        var dpbox = document.createElement('div');
                        dpbox.className = "impact-dp-box";
                        boxblock.appendChild(dpbox);

                        // adding img
                        var img = document.createElement('img');
                        img.src = data[i].pic_url;
                        img.className = "impact-dp";
                        dpbox.appendChild(img);

                        // details box
                        var userContent = document.createElement('div');
                        userContent.className = "impact-user-content";
                        boxblock.appendChild(userContent);
                        var userHead = document.createElement('h5');
                        userHead.id = "member-count";
                        userHead.innerHTML = data[i].name;
                        userContent.appendChild(userHead);
                        var clg = document.createElement('p');
                        clg.id = "cmp-name";
                        clg.innerHTML = data[i].company_name;
                        userContent.appendChild(clg);
                    }
                })
        }</script>

</head>

<body id="home" onload="mentor()">
    <!--======Navbar=======-->
    <div class="topnav" id="myTopnav">
        <div class="col-1">
            <a href=#><img src="https://spotknack.com/mailimages/spotknacklogo.png" class="logo">
            </a>
        </div>
    </div>


    <!-- chain welcome -->
    <div class="container-1">
        <h1 class="welcome-head">We dhodfu oahdoaf odifsdof sdfoishdfov vsoihvdsohv</h1>
        <p class="welcome-content">Amet minim mollit non deserunt ullamco est sit aliqua dolor do amet sint. Velit
            officia consequat duis
            enim velit mollit. Exercitation veniam consequat sunt nostrud amet.</p>
    </div>

    <!-- Team section -->
    <section class="section-container">
        <div class="inner-box">
            <div class="section-container-head">
                <h2 id="head-name">Student Team</h2>
                <p id="head-content">Click on Impacter to grow their impact chain</p>
            </div>
            <div class="impact-box" id="impactBox">
                <!-- <div class="impact-box-block" id="removeevent" onclick="growtree();removeEvent();">
                    <div class="impact-dp-box">
                    </div>
                    <div class="impact-user-content">
                        <h5 id="member-count"> Team Member One</h5>
                        <p id="cmp-name"> Coimbatore Institute of Technology</p>
                    </div>
                </div>
                <div class="impact-box-block" id="removeevent" onclick="growtree();removeEvent();">
                    <div class="impact-dp-box">
                    </div>
                    <div class="impact-user-content">
                        <h5 id="member-count"> Team Member One</h5>
                        <p id="cmp-name"> Coimbatore Institute of Technology</p>
                    </div>
                </div> -->
            </div>
        </div>
    </section>

    <!-- Impact chain -->
    <section class="impact-chain-box" id="impactChain">
        <h2>Student Team</h2>
        <!-- <div class="chain-odd-box" id="oddbox">
            <div class="img-block">
                <img src="img/talent green.png" class="student-profile-pic">
            </div>
            <hr />
        </div>
        <svg height="300" ; width="800" ; class="curved-line-right">
            <path d="M 30 110 C 70 190, 210 370, 370 110" />
        </svg>
        <div class=" chain-even-box" id="evenbox">
            <div class="img-block">
                <img src="img/talent green.png" class="student-profile-pic">
            </div>
        </div> -->
    </section>

    <!-- script -->

    <script>
        function growtree() {
            var mentor_id = event.currentTarget.id;
            console.log("before removing")
            console.log("mentorID" + mentor_id);
            document.getElementById("impactChain").style.display = "block";
            fetch(`https://testawsapi2.spotknack.com/api/growimpactchain?mentor_id=${mentor_id}`)
                .then((response) => response.json())
                .then((data) => {
                    // console.log(response)
                    // console.log(.length)
                    len = data.length;
                    var roundLength = Math.round(len / 4);
                    // var iterator = 0;
                    var boxcount = Math.round(len / 3);
                    var impactbox = document.getElementById("impactChain");
                    var innercounter = 0;
                    // console.log(" data " + data[9] + " length " + data.length)
                    for (var i = 0; i < roundLength; i++) {
                        // console.log(i)
                        var chainbox = document.createElement('div');
                        if ((i % 2 != 0) && (i != 0)) {
                            chainbox.className = "chain-even-box";
                        }
                        else {
                            chainbox.className = "chain-odd-box";
                        }
                        chainbox.id = "oddbox" + i;
                        impactbox.appendChild(chainbox);
                        for (j = 0; j <= parseInt(len / 3); j++) {
                            // console.log("first " + data[innercounter].pic_url)
                            var boxclass = document.getElementById("oddbox" + i);
                            // console.log(boxclass);
                            var img = document.createElement('img');
                            img.className = "student-profile-pic";
                            img.src = data[innercounter].pic_url;
                            img.id = "number" + innercounter;
                            boxclass.appendChild(img);
                            var line = document.createElement('hr');
                            line.className = "hrline"
                            // line.id = "hrlines" + innercounter;
                            boxclass.appendChild(line);
                            console.log(innercounter)
                            innercounter++
                            if (innercounter >= len)
                                j = 5;
                            // console.log(innercounter)
                        }
                        var curvedLine = document.createElement('svg');
                        if ((i % 2 != 0) && (i != 0)) {
                            curvedLine.className = "curved-line-left";
                        }
                        else {
                            curvedLine.className = "curved-line-right";
                        }
                        impactbox.appendChild(curvedLine);
                        var curvedPath = document.createElement('path');
                        curvedPath.setAttribute("d", "M 30 110 C 70 190, 210 370, 370 110");
                        curvedLine.appendChild(curvedPath);
                    }
                    var hr = document.getElementsByTagName('hr');
                    var hrlength = hr.length;
                    for (var i = 0; i < hrlength; i++) {
                        if (((i % 4) == 0) && (i != 0)) {
                            hr[i - 1].style.display = "none";
                        }
                        console.log(" i " + i);
                    }
                })
                .catch((err) => { console.log(err) })
            // console.log(document.getElementsByClassName('hrline'))
            document.getElementById(mentor_id).removeAttribute("onclick");
        }
    </script>

</body>

</html>