<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="title" content="Spotknack Talent Community">
    <meta name="description"
        content="A community of like-minded, passionate, and motivated students formed by mentoring with the help of a working professional.">
    <meta name="keywords" content="community, mentoring,spotknack ,passionate">
    <meta name="robots" content="index, follow">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display&display=swap" rel="stylesheet">
    <meta name="revisit-after" content="7 days">
    <meta name="author" content="spotknack">
    <title> Impact chain </title>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600&family=Poppins&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="css/impact_chain.css">
    <link rel="stylesheet" href="css/story.css">
    <link rel="icon" type="image/ico" href="img/talent green.png">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.2/css/all.css"
        integrity="sha384-vSIIfh2YWi9wW0r9iZe7RJPrKwp6bG+s9QZMoITbCckVJqGCCRhc+ccxNcdpHuYu" crossorigin="anonymous">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.3/css/all.css"
        integrity="sha384-SZXxX4whJ79/gErwcOYf+zWLeJdY/qpuqC4cAa9rOGUstPomtqpuNWT9wdPEn2fk" crossorigin="anonymous">
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <style>
        * {
            scroll-behavior: smooth;
        }
    </style>

    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-144587839-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'UA-144587839-1');
    </script>

    <script>
        function mentor() {
            console.log("funciton called");
            fetch('https://menteeapi.spotknack.com/api/impactmentorslist')
                .then(function (response) {
                    return response.json()
                })
                .then((data) => {
                    var classs = document.getElementById("impactBox");
                    len = data.length;
                    console.log("length of mentor" + len)
                    for (var i = 0; i < len; i++) {

                        // outer box creation
                        var boxblock = document.createElement('div');
                        boxblock.className = "impact-box-block";
                        // boxblock.onclick = growtree();
                        boxblock.setAttribute("href", "impactChain");
                        boxblock.id = data[i].mentor_id;
                        boxblock.setAttribute("onclick", "growtree(); scroll()");
                        console.log(boxblock)
                        classs.appendChild(boxblock);

                        // dp box creation
                        var dpbox = document.createElement('div');
                        dpbox.className = "impact-dp-box";
                        boxblock.appendChild(dpbox);

                        // adding img
                        var img = document.createElement('img');
                        img.src = data[i].pic_url;
                        img.className = "impact-dp";
                        dpbox.appendChild(img);

                        // details box
                        var userContent = document.createElement('div');
                        userContent.className = "impact-user-content";
                        boxblock.appendChild(userContent);
                        var userHead = document.createElement('h5');
                        userHead.id = "member-count";
                        userHead.innerHTML = data[i].name;
                        userContent.appendChild(userHead);
                        var clg = document.createElement('p');
                        clg.id = "cmp-name";
                        clg.innerHTML = data[i].company_name;
                        userContent.appendChild(clg);
                    }
                })
        }</script>

</head>

<body id="home" onload="mentor()">
    <!--======Navbar=======-->
    <div class="topnav" id="myTopnav">
        <div class="col-1">
            <a href=#><img src="https://spotknack.com/mailimages/spotknacklogo.png" class="logo">
            </a>
        </div>
    </div>


    <!-- chain welcome -->
    <div class="container-1">
        <h1 class="welcome-head">We dhodfu oahdoaf odifsdof sdfoishdfov vsoihvdsohv</h1>
        <p class="welcome-content">Amet minim mollit non deserunt ullamco est sit aliqua dolor do amet sint. Velit
            officia consequat duis
            enim velit mollit. Exercitation veniam consequat sunt nostrud amet.</p>
    </div>

    <!-- Team section -->
    <section class="section-container">
        <div class="inner-box">
            <div class="section-container-head">
                <h2 id="head-name">Student Team</h2>
                <p id="head-content">Click on Impacter to grow their impact chain</p>
            </div>
            <div class="impact-box" id="impactBox">
            </div>
        </div>
    </section>

    <!-- Impact chain -->
    <section class="impact-chain-box" id="impactChain" action="javascript:document.location.reload()">
        <h2>Student Team</h2>
    </section>

    <!-- script -->
    <script>
        function growtree() {
            var mentor_id = event.currentTarget.id;
            document.getElementById("impactChain").style.display = "block";
            fetch(`https://menteeapi.spotknack.com/api/growimpactchain?mentor_id=${mentor_id}`)
                .then((response) => response.json())
                .then((data) => {
                    len = data.length;
                    var roundLength = Math.round(len / 4);
                    var boxcount = Math.round(len / 3);
                    var innercounter = 0;
                    var impactbox = document.getElementById("impactChain");
                    var impactHead = document.createElement('h2');
                    impactHead.innerHTML = "Student Team";
                    impactbox.appendChild(impactHead);
                    for (var i = 0; i < roundLength; i++) {
                        var chainbox = document.createElement('div');
                        if ((i % 2 != 0) && (i != 0)) {
                            chainbox.className = "chain-even-box";
                        }
                        else {
                            chainbox.className = "chain-odd-box";
                        }
                        chainbox.id = "oddbox" + i;
                        impactbox.appendChild(chainbox);
                        for (j = 0; j <= parseInt(len / 3); j++) {
                            var boxclass = document.getElementById("oddbox" + i);
                            var outerdiv = document.createElement('div');
                            outerdiv.className = "tooltip";
                            boxclass.appendChild(outerdiv);
                            var img = document.createElement('img');
                            img.className = "student-profile-pic";
                            img.src = data[innercounter].pic_url;
                            img.id = "number" + innercounter;
                            outerdiv.appendChild(img);
                            var spanclass = document.createElement('span');
                            spanclass.className = "tooltiptext";
                            var student_name = document.createElement('h5');
                            student_name.id = "student-name-tip"
                            student_name.innerHTML = data[innercounter].student_name
                            var student_name1 = document.createElement('a');
                            student_name1.setAttribute("href", data[innercounter].linkedin);
                            spanclass.appendChild(student_name);
                            spanclass.appendChild(student_name1);
                            var linkedin_ico = document.createElement('i');
                            linkedin_ico.className = "fab fa-linkedin"
                            linkedin_ico.id = "linkedin"
                            student_name1.appendChild(linkedin_ico);
                            outerdiv.appendChild(spanclass);
                            var line = document.createElement('hr');
                            line.className = "hrline"
                            boxclass.appendChild(line);
                            innercounter++
                            if (innercounter >= len)
                                j = 5;
                        }
                        var curvedLine = document.createElement('div');
                        if (i == (roundLength - 1)) {
                            break;
                        }
                        else if ((i % 2 != 0) && (i != 0)) {
                            curvedLine.className = "curved-line-left";
                        }
                        else {
                            curvedLine.className = "curved-line-right";
                        }
                        impactbox.appendChild(curvedLine);
                    }
                    var hr = document.getElementsByTagName('hr');
                    var hrlength = hr.length;
                    for (var i = 0; i < hrlength; i++) {
                        if (i == (hrlength - 1)) {
                            hr[i].style.display = "none";
                        }
                        else if (((i % 4) == 0) && (i != 0)) {
                            hr[i - 1].style.display = "none";
                        }
                    }
                })
                .then(
                    document.getElementById("impactChain").scrollIntoView({ behavior: "smooth" })
                )
                .catch((err) => { console.log(err) })
            // document.getElementById(mentor_id).removeAttribute("onclick");
            var childnodes = document.getElementById("impactChain");
            while (childnodes.hasChildNodes()) {
                childnodes.removeChild(childnodes.firstChild);
            }
        }
    </script>

</body>

</html>